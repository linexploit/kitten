<h1>Profil de <%= @user.email %></h1>

<%= link_to "Modifier le profil", edit_user_registration_path(@user), class: "btn btn-primary mb-3" %>

<h2>Historique des commandes</h2>

<% if @orders.any? %>
  <div class="accordion" id="ordersAccordion">
    <% @orders.each do |order| %>
      <div class="accordion-item">
        <h2 class="accordion-header" id="heading<%= order.id %>">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse<%= order.id %>" aria-expanded="true" aria-controls="collapse<%= order.id %>">
            Commande #<%= order.id %> - <%= l(order.created_at, format: :long) %>
          </button>
        </h2>
        <div id="collapse<%= order.id %>" class="accordion-collapse collapse" aria-labelledby="heading<%= order.id %>" data-bs-parent="#ordersAccordion">
          <div class="accordion-body">
            <ul class="list-group list-group-flush">
              <% order.items.each do |item| %>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <%= item.title %>
                  <span><%= number_to_currency(item.price) %></span>
                </li>
              <% end %>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Total</strong>
                <strong><%= number_to_currency(order.items.sum(:price)) %></strong>
              </li>
            </ul>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <p>Vous n'avez pass√© aucune commande.</p>
<% end %>
